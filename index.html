<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    	<script src="06-25-2020.js"></script>

    	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
		  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
		  crossorigin=""/>

		<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
		  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
		  crossorigin=""></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js" integrity="sha256-nZaxPHA2uAaquixjSDX19TmIlbRNCOrf5HO1oHl5p70=" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css" integrity="sha256-IvM9nJf/b5l2RoebiFno92E5ONttVyaEEsdemDC6iQA=" crossorigin="anonymous" />
        
		<title>CovidNow</title>

		<style type="text/css">
			.nav-wrapper{
				padding-left: 20px;
			}
			.title{
				text-align: center;
				font-size: 70px;
			}
			a:link{
				text-decoration: none;

			}
			.note{
				background-color: red;
				color: yellow;
				padding: 20px;
				text-align: center;
			}
			.collection{
				border:0px;
			}
		</style>
	</head>
	<body>
		  <nav>
		    <div class="nav-wrapper blue">
		    	      <a href="#" class="brand-logo"><img src="virus.svg" style="width: 50px;margin-top: 5px;"></a>
		      <ul id="nav-mobile" class="right hide-on-med-and-down">
		        <li><a href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019" target="_blank">WHO</a></li>
		        <li><a href="badges.html">Components</a></li>
		        <li><a href="collapsible.html">JavaScript</a></li>
		      </ul>
		    </div>
		  </nav>

	<div class="row">

      <div class="col s12 m3 l3">
               
               <canvas id="chartjs-2" style="width: 350px; height: 497px;"></canvas>
      </div>
            
            
          <div class="col s12 m6 l6 orange" style="padding: 20px;"><div id="map" style="height:497px;"></div></div>
            
          <div class="col s12 m3 l3" id="mylist" style="background-color: #0066cc;">Top 5 confirmed</div>
            
        </div>
        <div style="background-color: #0066cc">
	<iframe width="520" height="415" style="display: block;margin-left: auto;margin-right: auto;"src="https://youtube.com/embed/EFCDu--F-YI" ></iframe>
		</div>	

		        <footer class="page-footer blue">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <h5 class="white-text">Covid Now!</h5>
                <p class="grey-text text-lighten-4">The Covid-19 pandemic is a global virus that can be spread through physical contact, touching of the eyes, nose and mouth. Infection can be avoided by wearing gloves and N95 masks at all times when you are outside. Please practice social distancing at all times with those not in your household, and do not gather in groups of more that 10 people. If you know someone who might infected with this virus (if they're showing symptoms of cough, fever, joint pain), get yourself and that person test immediately.</p> 
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text"></h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            Â© 2014 Copyright Text
            <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
            </div>
          </div>
        </footer>

	</body>

	<script type="text/javascript">
	
  mycolors = ['red','green','blue','orange','yellow'];
        myrgb = ['rgba(255,0,0,0.2)','rgba(0,255,0,0.2)','rgba(0,0,255,0.2)','rgba(252,186,3,0.2)','rgba(252,248,3,0.2)']
        myrgbouts = ['rgb(255,0,0)','rgb(0,255,0)','rgb(0,0,255)','rgb(252,186,3)','rgb(252,248,3)']
        
        makelist();
        makemap();
        makechart();
    
        
        function makelist() {
            
            //data = [{pname:"NYC",cname:"USA",conf:218000},{pname:"Moscow",cname:"Russia",conf:212000},{pname:"Sao Paulo",cname:"Brazil",conf:100000}];
            
            mylist = document.getElementById("mylist");
            
            myhtml = "<ul class='collection'><h3>Top 5</h3>";
            // 3 parts of c for loop - 1) counter 2) loop cond. 3) increment or decrement
            for (i=0; i<5;i++) {
                myhtml = myhtml + "<li class='collection-item avatar'>";
                myhtml = myhtml + "<i class='material-icons circle'>location_on</i>"
                if (data[i]['pname'] == "") {
                    myhtml = myhtml + "<b>" + data[i]['cname'] + "</b><br>";
                } else {
                    myhtml = myhtml + "<b>" + data[i]['pname'] + ", " + data[i]['cname'] + "</b><br>";
                }
                myhtml = myhtml + data[i]['conf'] + "</li>";
            }
            myhtml = myhtml + "</ul>";
            
            mylist.innerHTML = myhtml;
            
        }
        
        
        
        function makemap() {
            
            // step 3 - initialize the map
            var map = L.map('map').setView([30,0], 1.5);

            // step 4 load a tile layer
            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png',
            {
              maxZoom: 15,
              minZoom: 1
            }).addTo(map);
        
            
              
            // step 5 
            for (i=0;i<data.length;i++) {
            	 if (data[i]['pname'] == "") {
                    bindy = "<h6>" + data[i]['cname'] + ": <h6>" + data[i]['conf'];
                } else {
                    bindy = "<h6>" + data[i]['pname'] + ", " + data[i]['cname'] + ": <h6>" + data[i]['conf']
                }

                L.circle([data[i]['lat'], data[i]['lon']], {
                color: 'red',
                fillColor: '#f03',
                fillOpacity: 0.5,
                radius: data[i]['conf'] * 3
                }).bindPopup(data[i]['cname'] + ": " + data[i]['conf'], { maxWidth: "auto"}).addTo(map);
            }
        }
        
        function makechart() {
            label5 = [];
            data5 = [];
            for (i=0;i<5;i++) {
                if (data[i]['pname'] != "") {
                   label5.push(data[i]['pname'] + ", " + data[i]['cname']); 
                } else {
                   label5.push(data[i]['cname']); 
                }
                data5.push(data[i]['conf']);
            }
            
            
            chart = new Chart(document.getElementById("chartjs-2"),{"type":"horizontalBar","data":{"labels": label5,"datasets":[{"label":"", "data": data5,"fill":false,"backgroundColor":"rgb(0, 153, 255)","borderColor":"rgb(0, 153, 255)", "borderWidth":1}]} ,"options":{"scales":{"xAxes":[{"ticks":{"beginAtZero":true}}]},
            onClick:function(e, items){
            if ( items.length == 0 ) return; //Clicked outside any bar.
            //openModal(items[0]['_model']['label']);
            console.log(items[i]['_model']['label'])
            },tooltips: {
                custom: function(tooltip) {
                    if (!tooltip) return;
                    // disable displaying the color box;
                    tooltip.displayColors = false;
                  },
                callbacks: {
                    label: function(tooltipItem) {
                        return "Cases: " + tooltipItem.xLabel;
                    }
                }   
            },
            title: {
                  display: true,
                  text: 'Confirmed cases',
                  position: 'top',
                  fontSize: 25
            }
            }                                                       
            });
            
        }
        

    
        
    </script>


</html>
